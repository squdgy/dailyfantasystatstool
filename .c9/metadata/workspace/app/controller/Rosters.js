{"changed":true,"filter":false,"title":"Rosters.js","tooltip":"/app/controller/Rosters.js","value":"/*global Ext: false DFST: false html2canvas: false*/\nExt.define('DFST.controller.Rosters', {\n    extend: 'Ext.app.Controller',\n\n    stores: ['SiteDetails', 'Roster'],\n    models: ['SiteDetails', 'RosterPosition', 'RosterSlot'],\n    views:  ['statset.Grid', 'rosterbuilder.Panel'],\n    \n    refs: [\n        {ref: 'siteInfo', selector: '#siteinfo'},\n        {ref: 'siteScreenShotArea', selector: '#ssarea'},\n        {ref: 'siteGrid', selector: 'rosterbuilder grid'},\n        {ref: 'screenShotButton', selector: 'rosterbuilder button#screenshot'},\n        {ref: 'deleteButtons', selector: 'rosterbuilder actioncolumn[id=delete]'},\n        {ref: 'watermark', selector: 'rosterbuilder #watermark'}\n    ],\n    \n    /* internal variables */\n    _dfsGameId: null,\n    _date: null,\n    \n    init: function() {\n        this.listen({\n            component: {\n                'statsetgrid': {\n                    selectionchange: this.highlightPossibleSlots\n                },\n                'statsetgrid > tableview': {\n                    itemdblclick: this.addToRoster\n                },\n                'rosterbuilder': {\n                    removefromroster: this.removeFromRoster\n                },\n                'rosterbuilder button#screenshot': {\n                    click: this.screenShot\n                },\n                'rosterbuilder button#clear': {\n                    click: this.clearRoster\n                }\n            },\n            controller: {\n                '*': {\n                    appDateChanged: this.changeDate,\n                    appScoringChanged: this.changeScoring\n                }\n            },\n            store: {\n                '#Roster' : {\n                    beforesync : this.updateSummary\n                }  \n            }\n        });\n    },\n    \n    onLaunch: function() {\n        // clear rosters saved before yesterday\n        var store = this.getRosterStore();\n        store.load();\n        var delTime = new Date().getTime() - (1000 * 60 * 60 * 24 * 2);\n        var nrecs = store.count();\n        var didRemove = false;\n        for (var i = nrecs; i > 0; i--) {\n            var rec = store.getAt(i-1);\n            if (rec.get('dt').getTime() < delTime) {\n                didRemove = true;\n                store.removeAt(i-1);\n            }\n        }\n        if (didRemove) { store.sync(); }\n    },\n    \n    changeDate: function(newDate) {\n        this._date = new Date(newDate.getFullYear(), newDate.getMonth(), \n            newDate.getDate());\n        this.changeRosterDefinition();\n    },\n\n    changeScoring: function(dfsGameId) {\n        this._dfsGameId = dfsGameId;\n        this.changeRosterDefinition();\n    },\n    \n    changeRosterDefinition: function() {\n        var siteRec = this.getSiteDetailsStore().findRecord('dfsGameId', \n            this._dfsGameId);\n        var date = this._date;\n        if (date === null || siteRec === null) return;\n        \n        var me = this;\n        var positions = siteRec.getAssociatedData().positions;\n        var cap = siteRec.get('cap');\n\n        // load roster from cache if there is one,\n        var npos = positions.length;\n        var rStore = this.getRosterStore();\n\n        // only show players from the dfs game and date we care about\n        rStore.filterBy(function(rec, id) {\n            return rec.get('dfsGameId') === me._dfsGameId &&\n                rec.get('dt').getTime() === me._date.getTime();\n        });\n        \n        // if store is empty, nothing was in cache\n        var numSlots = 0;\n        if (rStore.count() === 0) {\n            for (var i=0; i<npos; i++) {\n                var pos = positions[i];\n                // fill rosterStore with empty spots\n                for (var j=0; j<pos.count; j++) {\n                    rStore.add(Ext.create('DFST.model.RosterSlot', {\n                        dfsGameId: me._dfsGameId, \n                        dt: me._date,\n                        rpos: pos.name, \n                        rpid: pos.id\n                    }));\n                    numSlots++;\n                }\n            }\n        }\n        // if > 0, but less than npos, something went wrong\n        if (numSlots > 0 && numSlots < rStore.count()) {\n            if (console.log) { console.log('problem deserializing roster'); }\n        }\n\n        var fmtcap = Ext.util.Format.currency(cap, '$', -1);\n        var perplayer = Ext.util.Format.currency(cap/numSlots, '$', -1);\n        me.getSiteInfo().update({\n            cap: fmtcap,\n            remaining: fmtcap,\n            perplayer: perplayer\n        });\n        var sportString = DFST.AppSettings.sport.toUpperCase();\n        var dateString = me._date.toDateString();\n        me.getSiteGrid().setTitle(siteRec.get('name') + ' - ' + fmtcap + ' - ' + sportString + ' - ' + dateString);\n        me.salaryCap = cap; // save for later use\n        \n        this.updateSummary();\n    },\n    \n    screenShot: function() {\n        var watermark = this.getWatermark();\n        var rgrid = Ext.getCmp('rostergrid');\n        var selModel = rgrid.view.selModel;\n        var selections = selModel.getSelection();\n        var deleteButtons = this.getDeleteButtons();\n        \n        var ssArea = this.getSiteScreenShotArea();\n        // clear some things for screenshot\n        rgrid.showCopyright = true;\n        deleteButtons.hide();\n        selModel.deselectAll();\n        watermark.show();\n\n        html2canvas(ssArea.getEl().dom, {\n            onrendered: function(canvas) {\n                //restore stuff cleared for screenshot\n                rgrid.showCopyright = false;\n                watermark.hide();\n                selModel.select(selections, false, true);\n                deleteButtons.show();\n                \n                var dataURL = canvas.toDataURL();\n                \n                Ext.create('Ext.window.Window', {\n                    title: 'Your Lineup as an Image',\n                    height: canvas.height + 100,\n                    width: canvas.width + 50,\n                    layout: {\n                        type: 'vbox',\n                        align: 'center'\n                    },\n                    defaults: {\n                        padding: 5  \n                    },\n                    items: [{\n                        xtype: 'panel',\n                        html: '<img title=\"lineup\" src=\"' + dataURL +'\">'\n                    }, {\n                        xtype: 'button',\n                        text: 'Download',\n                        listeners: {\n                            click: function(){\n                                var link = document.createElement(\"a\");\n                                link.setAttribute(\"href\", dataURL);\n                                link.setAttribute(\"download\", \"lineup.png\");\n                                link.click();\n                            }\n                        }\n                    }, {\n                        xtype: 'button',\n                        text: 'Upload',\n                        listeners: {\n                            click: function(){\n                                var b64src = dataURL.replace(/.*,/, '');\n                                Ext.Ajax.request({\n                                   url: 'https://lineupbragproxy.azurewebsites.net/',\n                                   method: 'post',\n                                   params: { base64Image : b64src }\n                                });                                \n                            }\n                        }\n                    }]\n                }).show();                \n            }\n        });    \n    },\n\n    /* When a roster changes update the summary information  */\n    updateSummary: function( options ) {\n        var store = this.getRosterStore();\n        var numSlots = store.count();\n        var usedcap = 0;\n        var slotsrem = 0;\n        for (var i=0; i < numSlots; i++) {\n            var sal = store.getAt(i).get('salary');\n            if (sal > 0) {\n                usedcap += sal;\n            } else {\n                slotsrem++;\n            }\n        }\n        var cap = this.salaryCap;\n        var rem = cap - usedcap;\n        var fmtcap = Ext.util.Format.currency(cap, '$', -1);\n        var fmtrem = Ext.util.Format.currency(rem, '$', -1);\n        var pp = slotsrem === 0 ? 0 : (cap - usedcap)/slotsrem;\n        var fmtpp = Ext.util.Format.currency(pp, '$', -1);\n     \n        var highlightTpl = new Ext.Template('<span style=\"color:red;font-weight:bold;\">{0}</span>');\n        var fmthtml = rem >= 0 ? fmtrem : highlightTpl.apply([fmtrem]);\n        var pphtml = rem >= 0 ? fmtpp : highlightTpl.apply([fmtpp]);\n        this.getSiteInfo().update({\n            cap: fmtcap,\n            remaining: fmthtml,\n            perplayer: pphtml\n        });\n    },\n   \n    /* Add player to first eligible, open roster spot, if any */\n    addToRoster: function(view, playerRec, item, index, e, eOpts ) {\n        var store = Ext.getCmp('rostergrid').store,\n            nrecs = store.count(),\n            i, rec;\n\n        // no salary?, return\n        if (playerRec.get('sal') === 0) {\n            return;\n        }\n        // if the player is already in the roster; if so, return\n        var pid = playerRec.get('id');\n        if (store.findRecord('pid', pid)) { \n            return;\n        } else {\n            for (i=0; i<nrecs; i++) {\n                rec = store.getAt(i);\n                if (rec.get('pid') > 0) { //slot filled\n                    continue;   \n                }\n                if (Ext.Array.contains(playerRec.get('rpel'), rec.get('rpid'))) {\n                    //found empty slot\n                    var pname = playerRec.get('fname') + ' ' + playerRec.get('lname');\n                    if (DFST.AppSettings.sport === 'mlb') {\n                        var prop = playerRec.get('spos') === 'P' ? 'throws' : 'bats';\n                        var propVal = playerRec.get(prop);\n                        var val = 'S';\n                        if (propVal === 1) {\n                            val = 'L';\n                        } else if (propVal === 2) {\n                            val = 'R';\n                        }\n                        pname += ' (' + val + ')';\n                    }\n                    rec.set('name', pname);\n                    rec.set('team', playerRec.get('team'));\n                    rec.set('pid', pid);\n                    rec.set('fppg', playerRec.get('afp'));\n                    rec.set('salary', playerRec.get('sal'));\n                    store.sync();\n                    return;\n                }\n            }\n        }\n    },\n    \n    removeFromRoster: function(store, rec){\n        rec.set('name', null);\n        rec.set('team', null);\n        rec.set('pid', null);\n        rec.set('fppg', null);\n        rec.set('salary', null);\n        store.sync();\n    },\n\n    clearRoster: function(){\n        var store = this.getRosterStore();\n        var nrecs = store.count();\n        for (var i=0; i<nrecs; i++) {\n            var rec = store.getAt(i);\n            rec.set('name', null);\n            rec.set('team', null);\n            rec.set('pid', null);\n            rec.set('fppg', null);\n            rec.set('salary', null);\n        }\n        store.sync();\n    },\n    \n    /* selects (highlights) rows in roster grid where a selected player may be placed  */\n    highlightPossibleSlots: function(grid, recs) {\n        if (!recs || recs.length === 0) return;\n        \n        var possibleSlots = [],\n            playerRec = recs[0],\n            rgrid = Ext.getCmp('rostergrid'),\n            store = rgrid.store,\n            nrecs = store.count(),\n            i, rec;\n        \n        // check if the player is already in the roster\n        // if so, select only that spot\n        var pid = playerRec.get('id');\n        var existingRec = store.findRecord('pid', pid);\n        if (existingRec) { \n            possibleSlots.push(existingRec);\n        } else if (playerRec.get('sal') === 0) { // no salary\n            // do nothing\n        } else {\n            for (i=0; i<nrecs; i++) {\n                rec = store.getAt(i);\n                if (Ext.Array.contains(playerRec.get('rpel'), rec.get('rpid'))) {\n                    possibleSlots.push(rec);\n                }\n            }\n        }\n\n        rgrid.view.selModel.select(possibleSlots, false, true);\n    }\n});","undoManager":{"stack":[[{"start":{"row":184,"column":76},"end":{"row":185,"column":0},"action":"insert","lines":["",""]},{"start":{"row":185,"column":0},"end":{"row":185,"column":32},"action":"insert","lines":["                                "]}],[{"start":{"row":184,"column":76},"end":{"row":185,"column":32},"action":"remove","lines":["","                                "]}],[{"start":{"row":188,"column":0},"end":{"row":199,"column":0},"action":"insert","lines":["                    }, {","                        xtype: 'button',","                        text: 'Download',","                        listeners: {","                            click: function(){","                                var link = document.createElement(\"a\");","                                link.setAttribute(\"href\", dataURL);","                                link.setAttribute(\"download\", \"lineup.png\");","                                link.click();","                            }","                        }",""]}],[{"start":{"row":190,"column":31},"end":{"row":190,"column":39},"action":"remove","lines":["Download"]},{"start":{"row":190,"column":31},"end":{"row":190,"column":32},"action":"insert","lines":["U"]}],[{"start":{"row":190,"column":32},"end":{"row":190,"column":33},"action":"insert","lines":["p"]}],[{"start":{"row":190,"column":33},"end":{"row":190,"column":34},"action":"insert","lines":["l"]}],[{"start":{"row":190,"column":34},"end":{"row":190,"column":35},"action":"insert","lines":["o"]}],[{"start":{"row":190,"column":35},"end":{"row":190,"column":36},"action":"insert","lines":["a"]}],[{"start":{"row":190,"column":36},"end":{"row":190,"column":37},"action":"insert","lines":["d"]}],[{"start":{"row":196,"column":45},"end":{"row":197,"column":0},"action":"insert","lines":["",""]},{"start":{"row":197,"column":0},"end":{"row":197,"column":32},"action":"insert","lines":["                                "]}],[{"start":{"row":197,"column":0},"end":{"row":202,"column":3},"action":"insert","lines":["Ext.Ajax.request({","   url: 'foo.php',    // where you wanna post","   success: passFn,   // function called on success","   failure: failFn,","   params: { foo: 'bar' }  // your json data","});"]}],[{"start":{"row":193,"column":0},"end":{"row":197,"column":0},"action":"remove","lines":["                                var link = document.createElement(\"a\");","                                link.setAttribute(\"href\", dataURL);","                                link.setAttribute(\"download\", \"lineup.png\");","                                link.click();",""]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":193,"column":0},"end":{"row":193,"column":4},"action":"insert","lines":["    "]},{"start":{"row":194,"column":0},"end":{"row":194,"column":4},"action":"insert","lines":["    "]},{"start":{"row":195,"column":0},"end":{"row":195,"column":4},"action":"insert","lines":["    "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":4},"action":"insert","lines":["    "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":4},"action":"insert","lines":["    "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":197,"column":50},"end":{"row":197,"column":55},"action":"remove","lines":["'bar'"]},{"start":{"row":197,"column":50},"end":{"row":197,"column":57},"action":"insert","lines":["dataURL"]}],[{"start":{"row":195,"column":0},"end":{"row":197,"column":0},"action":"remove","lines":["                                   success: passFn,   // function called on success","                                   failure: failFn,",""]}],[{"start":{"row":194,"column":77},"end":{"row":195,"column":0},"action":"insert","lines":["",""]},{"start":{"row":195,"column":0},"end":{"row":195,"column":35},"action":"insert","lines":["                                   "]}],[{"start":{"row":196,"column":45},"end":{"row":196,"column":48},"action":"remove","lines":["foo"]},{"start":{"row":196,"column":45},"end":{"row":196,"column":46},"action":"insert","lines":["b"]}],[{"start":{"row":196,"column":46},"end":{"row":196,"column":47},"action":"insert","lines":["a"]}],[{"start":{"row":196,"column":47},"end":{"row":196,"column":48},"action":"insert","lines":["s"]}],[{"start":{"row":196,"column":48},"end":{"row":196,"column":49},"action":"insert","lines":["e"]}],[{"start":{"row":196,"column":49},"end":{"row":196,"column":50},"action":"insert","lines":["6"]}],[{"start":{"row":196,"column":50},"end":{"row":196,"column":51},"action":"insert","lines":["4"]}],[{"start":{"row":196,"column":51},"end":{"row":196,"column":52},"action":"insert","lines":["I"]}],[{"start":{"row":196,"column":52},"end":{"row":196,"column":53},"action":"insert","lines":["m"]}],[{"start":{"row":196,"column":53},"end":{"row":196,"column":54},"action":"insert","lines":["a"]}],[{"start":{"row":196,"column":54},"end":{"row":196,"column":55},"action":"insert","lines":["g"]}],[{"start":{"row":196,"column":55},"end":{"row":196,"column":56},"action":"insert","lines":["e"]}],[{"start":{"row":196,"column":56},"end":{"row":196,"column":57},"action":"insert","lines":[" "]}],[{"start":{"row":195,"column":35},"end":{"row":195,"column":36},"action":"insert","lines":["m"]}],[{"start":{"row":195,"column":36},"end":{"row":195,"column":37},"action":"insert","lines":["e"]}],[{"start":{"row":195,"column":37},"end":{"row":195,"column":38},"action":"insert","lines":["t"]}],[{"start":{"row":195,"column":38},"end":{"row":195,"column":39},"action":"insert","lines":["h"]}],[{"start":{"row":195,"column":39},"end":{"row":195,"column":40},"action":"insert","lines":["o"]}],[{"start":{"row":195,"column":40},"end":{"row":195,"column":41},"action":"insert","lines":["d"]}],[{"start":{"row":195,"column":41},"end":{"row":195,"column":42},"action":"insert","lines":[" "]}],[{"start":{"row":195,"column":41},"end":{"row":195,"column":42},"action":"remove","lines":[" "]}],[{"start":{"row":195,"column":41},"end":{"row":195,"column":42},"action":"insert","lines":[":"]}],[{"start":{"row":195,"column":42},"end":{"row":195,"column":43},"action":"insert","lines":[" "]}],[{"start":{"row":195,"column":43},"end":{"row":195,"column":45},"action":"insert","lines":["''"]}],[{"start":{"row":195,"column":44},"end":{"row":195,"column":45},"action":"insert","lines":["p"]}],[{"start":{"row":195,"column":45},"end":{"row":195,"column":46},"action":"insert","lines":["o"]}],[{"start":{"row":195,"column":46},"end":{"row":195,"column":47},"action":"insert","lines":["s"]}],[{"start":{"row":195,"column":47},"end":{"row":195,"column":48},"action":"insert","lines":["t"]}],[{"start":{"row":195,"column":49},"end":{"row":195,"column":50},"action":"insert","lines":[","]}],[{"start":{"row":194,"column":50},"end":{"row":194,"column":77},"action":"remove","lines":["    // where you wanna post"]}],[{"start":{"row":196,"column":68},"end":{"row":196,"column":87},"action":"remove","lines":["  // your json data"]}],[{"start":{"row":192,"column":46},"end":{"row":193,"column":0},"action":"insert","lines":["",""]},{"start":{"row":193,"column":0},"end":{"row":193,"column":32},"action":"insert","lines":["                                "]}],[{"start":{"row":193,"column":32},"end":{"row":193,"column":33},"action":"insert","lines":["v"]}],[{"start":{"row":193,"column":33},"end":{"row":193,"column":34},"action":"insert","lines":["a"]}],[{"start":{"row":193,"column":34},"end":{"row":193,"column":35},"action":"insert","lines":["r"]}],[{"start":{"row":193,"column":35},"end":{"row":193,"column":36},"action":"insert","lines":[" "]}],[{"start":{"row":193,"column":36},"end":{"row":193,"column":37},"action":"insert","lines":["b"]}],[{"start":{"row":193,"column":37},"end":{"row":193,"column":38},"action":"insert","lines":["6"]}],[{"start":{"row":193,"column":38},"end":{"row":193,"column":39},"action":"insert","lines":["4"]}],[{"start":{"row":193,"column":39},"end":{"row":193,"column":40},"action":"insert","lines":["s"]}],[{"start":{"row":193,"column":40},"end":{"row":193,"column":41},"action":"insert","lines":["r"]}],[{"start":{"row":193,"column":41},"end":{"row":193,"column":42},"action":"insert","lines":["c"]}],[{"start":{"row":193,"column":42},"end":{"row":193,"column":43},"action":"insert","lines":[" "]}],[{"start":{"row":193,"column":43},"end":{"row":193,"column":44},"action":"insert","lines":["="]}],[{"start":{"row":193,"column":44},"end":{"row":193,"column":45},"action":"insert","lines":[" "]}],[{"start":{"row":193,"column":45},"end":{"row":193,"column":46},"action":"insert","lines":["d"]}],[{"start":{"row":193,"column":46},"end":{"row":193,"column":47},"action":"insert","lines":["a"]}],[{"start":{"row":193,"column":47},"end":{"row":193,"column":48},"action":"insert","lines":["t"]}],[{"start":{"row":193,"column":48},"end":{"row":193,"column":49},"action":"insert","lines":["a"]}],[{"start":{"row":193,"column":49},"end":{"row":193,"column":50},"action":"insert","lines":["U"]}],[{"start":{"row":193,"column":50},"end":{"row":193,"column":51},"action":"insert","lines":["R"]}],[{"start":{"row":193,"column":51},"end":{"row":193,"column":52},"action":"insert","lines":["L"]}],[{"start":{"row":193,"column":52},"end":{"row":193,"column":53},"action":"insert","lines":["."]}],[{"start":{"row":193,"column":53},"end":{"row":194,"column":0},"action":"insert","lines":[".replace(/.*,/, '');",""]}],[{"start":{"row":193,"column":53},"end":{"row":193,"column":54},"action":"remove","lines":["."]}],[{"start":{"row":198,"column":59},"end":{"row":198,"column":66},"action":"remove","lines":["dataURL"]},{"start":{"row":198,"column":59},"end":{"row":198,"column":65},"action":"insert","lines":["b64src"]}],[{"start":{"row":193,"column":72},"end":{"row":194,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":195,"column":41},"end":{"row":195,"column":48},"action":"remove","lines":["foo.php"]},{"start":{"row":195,"column":41},"end":{"row":195,"column":83},"action":"insert","lines":["https://lineupbragproxy.azurewebsites.net/"]}],[{"start":{"row":195,"column":64},"end":{"row":195,"column":65},"action":"insert","lines":["2"]}],[{"start":{"row":195,"column":64},"end":{"row":195,"column":65},"action":"remove","lines":["2"]}]],"mark":-1,"position":81},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":15,"column":6},"end":{"row":15,"column":6},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1427576719000}