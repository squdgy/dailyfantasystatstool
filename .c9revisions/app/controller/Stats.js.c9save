{"ts":1340374405662,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"Ext.define('DFST.controller.Stats', {\n    extend: 'Ext.app.Controller',\n\n    stores: ['Stats', 'PlayerStats'],\n\n    models: ['StatSet', 'PlayerStatSet'],\n\n    views: ['statset.Grid', 'statset.PlayerGrid', 'drilldown.Details', 'drilldown.DetailInfo'],\n\n    refs: [{\n    \tref: 'drilldowndetails',\n    \tselector: 'drilldowndetails'\n    }, {\n        ref: 'drilldowninfo',\n    \tselector: 'drilldowninfo'\n    }],\n\n    init: function() {\n        // Set up service URLs\n        var host = 'http://localhost:49533';    //local\n        if (location.hostname.indexOf('cloudapp.net') > 0) {\n            host = 'http://dfst.cloudapp.net';  //live azure\n        }\n//        host = 'http://localhost:81';       //local azure dev fabric \n        var statsStore = this.getStatsStore();\n        var playerStatsStore = this.getPlayerStatsStore();\n        statsStore.proxy.url = host + '/api/players/';\n        playerStatsStore.proxy.url = host + '/api/playerstats/';\n\n        this.control({\n            'statsetgrid': {\n                selectionchange: this.drillDown\n            },\n            'statsetgrid > tableview': {\n                itemdblclick: this.loadStatSet,\n                refresh: this.selectStatSet\n            }\n        });\n    },\n    \n    selectStatSet: function(view) {\n        var first = this.getStatsStore().getAt(0);\n        if (first) {\n            view.getSelectionModel().select(first);\n        }\n    },\n\n    /**\n     * Loads the given statset into the drilldown view\n     * @param {DFST.model.StatSet} statset The statset to load\n     */\n    drillDown: function(grid, statsets) {\n        var statset = statsets[0],\n            detailsInfoView = this.getDrilldowninfo(),\n            detailsView = this.getDrilldowndetails(),\n            siteId=this.getStatsStore().filters.get(\"scoring\").value,\n            store;\n\n        if (statset && detailsView) {\n            store = this.getPlayerStatsStore();\n            store.filter([\n                {id:'id', property: 'id', value: statset.data.id},\n                {id:'scoring', property: 'scoring', value: siteId}\n            ]);\n            detailsInfoView.statset = statset;\n            detailsInfoView.update(statset.data);\n            detailsView.setTitle('Game Details: ' + statset.data.name);\n            detailsView.show();\n        }\n    }});\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2307}]],"length":2307}
{"contributors":[],"silentsave":false,"ts":1359300940397,"patch":[[{"diffs":[[0,"      }\n"],[-1,"//"],[0,"        "]],"start1":642,"start2":642,"length1":18,"length2":16}]],"length":2305,"saved":false}
{"ts":1359301101252,"patch":[[{"diffs":[[0,"azure\n        }\n"],[1,"//"],[0,"        host = '"]],"start1":634,"start2":634,"length1":32,"length2":34}]],"length":2307,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359824054243,"patch":[[{"diffs":[[0,"    site"],[-1,"Id"],[1,"Abb"],[0,"=this.ge"]],"start1":1741,"start2":1741,"length1":18,"length2":19},{"diffs":[[0,"site"],[-1,"Id"],[1,"Abb"],[0,"}\n  "]],"start1":2063,"start2":2063,"length1":10,"length2":11}]],"length":2309,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359830608016,"patch":[[{"diffs":[[0,"ue: site"],[-1,"Abb"],[1,"Id"],[0,"}\n      "]],"start1":2059,"start2":2059,"length1":19,"length2":18}]],"length":2308,"saved":false}
{"ts":1359830868474,"patch":[[{"diffs":[[0,"site"],[-1,"Abb"],[1,"Id"],[0,"=thi"]],"start1":1745,"start2":1745,"length1":11,"length2":10},{"diffs":[[0,"value: s"],[-1,"ite"],[1,"tat"],[0,"Id}\n    "]],"start1":2055,"start2":2055,"length1":19,"length2":19}]],"length":2307,"saved":false}
{"ts":1359830884158,"patch":[[{"diffs":[[0,"value: s"],[-1,"tat"],[1,"ite"],[0,"Id}\n    "]],"start1":2055,"start2":2055,"length1":19,"length2":19}]],"length":2307,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360515498751,"patch":[[{"diffs":[[0,"ndexOf('"],[-1,"cloudapp.net"],[1,"azurewebites"],[0,"') > 0) "]],"start1":549,"start2":549,"length1":28,"length2":28}]],"length":2307,"saved":false}
{"ts":1360515544015,"patch":[[{"diffs":[[0,"azureweb"],[1,"s"],[0,"ites') >"]],"start1":557,"start2":557,"length1":16,"length2":17}]],"length":2308,"saved":false}
{"ts":1360519378059,"patch":[[{"diffs":[[0,"p://dfst"],[1,"api"],[0,".cloudap"]],"start1":603,"start2":603,"length1":16,"length2":19}]],"length":2311,"saved":false}
{"contributors":[],"silentsave":false,"ts":1363180625263,"patch":[[{"diffs":[[0,"o'\n    }"],[-1,""],[0,""],[1,", {\n        ref: 'drilldownnextopp',\n        selector: 'drilldowndetails checkbox#nextopp'\n    }\n    "],[0,"],\n\n    "]],"start1":396,"start2":396,"length1":16,"length2":117},{"diffs":[[0,"           }"],[1,","],[0,"\n        });"]],"start1":1303,"start2":1303,"length1":24,"length2":25},{"diffs":[[0,"        "],[-1,"}"],[1,"    'drilldowninfo checkbox#nextopp':{\n                change: this.loadStatSetData\n            }\n            });\n    },\n    \n    loadStatSetData: function(limitToNextOpponent) {\n        var limit = \n        store = this.getPlayerStatsStore();\n        store.filter([\n            {id:'id', property: 'id', value: this.playerId},\n            {id:'scoring', property: 'scoring', value: this.siteId},\n            {id:'nextopp', property: 'nextopp', value: limitToNextOpponent ? this.gameId : limitToNextOpponent},\n        ]"],[0,");\n    }"]],"start1":1317,"start2":1317,"length1":17,"length2":535},{"diffs":[[0,"   s"],[-1,"iteId=this.getStatsStore().filters.get(\"scoring\").value,"],[1,"tore;"],[0,"\n   "]],"start1":2366,"start2":2366,"length1":64,"length2":13},{"diffs":[[0,"        "],[-1,"store;\n"],[0,"\n       "]],"start1":2380,"start2":2380,"length1":23,"length2":16},{"diffs":[[0,"    "],[-1,"if (statset && detailsView) {\n            store"],[1,"this.playerId = statset.data.id;\n        this.siteId"],[0," = t"]],"start1":2393,"start2":2393,"length1":55,"length2":60},{"diffs":[[0,"iteId = this.get"],[-1,"Player"],[0,"StatsStore();\n  "]],"start1":2444,"start2":2444,"length1":38,"length2":32},{"diffs":[[0,"re()"],[-1,";\n            store.filter([\n                {id:'id', property: 'id', value:"],[1,".filters.get(\"scoring\").value;\n        this.gameId ="],[0," sta"]],"start1":2468,"start2":2468,"length1":85,"length2":60},{"diffs":[[0,"ata."],[-1,"id},"],[1,"gameId;"],[0,"\n   "]],"start1":2534,"start2":2534,"length1":12,"length2":15},{"diffs":[[0,"    "],[1,"\n"],[0,"        "],[-1,"{id:'scoring', property: 'scoring', value: siteId}\n            ]"],[1,"if (statset && detailsView) {\n            this.loadStatSetData("],[0,");\n "]],"start1":2550,"start2":2550,"length1":80,"length2":80}]],"length":2850,"saved":false}
{"ts":1363180691336,"patch":[[{"diffs":[[0,"limit = "],[1,"this.getDrilldownnextopp().getValue();"],[0,"\n       "]],"start1":1516,"start2":1516,"length1":16,"length2":54}]],"length":2888,"saved":false}
{"ts":1363180703668,"patch":[[{"diffs":[[0,"unction("],[-1,"limitToNextOpponent"],[0,") {\n    "]],"start1":1473,"start2":1473,"length1":35,"length2":16},{"diffs":[[0,"e: limit"],[-1,"ToNextOpponent"],[0," ? this."]],"start1":1793,"start2":1793,"length1":30,"length2":16},{"diffs":[[0,"imit"],[-1,"ToNextOpponent"],[0,"},\n "]],"start1":1819,"start2":1819,"length1":22,"length2":8}]],"length":2841,"saved":false}
{"ts":1363180717317,"patch":[[{"diffs":[[0,"();\n        "],[1,"var "],[0,"store = this"]],"start1":1540,"start2":1540,"length1":24,"length2":28}]],"length":2845,"saved":false}
{"contributors":[],"silentsave":false,"ts":1363183391804,"patch":[[{"diffs":[[0,"re;\n            "],[1,"        "],[0,"\n"],[1,"        if (statset && detailsView) {\n    "],[0,"        this.pla"]],"start1":2367,"start2":2367,"length1":33,"length2":83},{"diffs":[[0,"id;\n        "],[1,"  "],[1,"  "],[0,"this.siteId "]],"start1":2471,"start2":2471,"length1":24,"length2":28},{"diffs":[[0,"ue;\n        "],[1,"    "],[0,"this.gameId "]],"start1":2548,"start2":2548,"length1":24,"length2":28},{"diffs":[[0,"Id;\n"],[-1,"        \n        if (statset && detailsView) {"],[0,"\n   "]],"start1":2595,"start2":2595,"length1":54,"length2":8}]],"length":2857,"saved":false}
{"contributors":[],"silentsave":false,"ts":1372513205832,"patch":[[{"diffs":[[0,"s: ["],[-1,"{\n    \t"],[1,"\n        { ref: 'playerGrid', selector: 'statsetplayergrid' },\n        { "],[0,"ref:"]],"start1":259,"start2":259,"length1":15,"length2":81},{"diffs":[[0,"etails',"],[-1,"\n    \t"],[1,"  "],[0,"selector"]],"start1":352,"start2":352,"length1":22,"length2":18},{"diffs":[[0,"details'"],[-1,"\n    }, {"],[1,"},"],[0,"\n       "],[1," {"],[0," ref: 'd"]],"start1":382,"start2":382,"length1":33,"length2":28},{"diffs":[[0,"fo',"],[-1,"\n    \t"],[1," "],[0,"sele"]],"start1":420,"start2":420,"length1":14,"length2":9},{"diffs":[[0,"nfo'"],[-1,"\n   "],[0," },"],[-1," {"],[0,"\n       "],[1," {"],[0," ref"]],"start1":446,"start2":446,"length1":25,"length2":21},{"diffs":[[0,"extopp',"],[-1,"\n       "],[0," selecto"]],"start1":480,"start2":480,"length1":24,"length2":16},{"diffs":[[0,"opp'"],[1,"}"],[0,"\n    "],[-1,"}\n"],[0,"    "]],"start1":530,"start2":530,"length1":15,"length2":14},{"diffs":[[0,"setgrid': {\n"],[1,"                filterchange: this.drillDown,\n"],[0,"            "]],"start1":1133,"start2":1133,"length1":24,"length2":70},{"diffs":[[0,"ameId;\n\n"],[1,"            var pos = statset.data.spos;\n            var pgrid = this.getPlayerGrid();\n            if (pos == 'P')\n                pgrid.reconfigure(null, pgrid.mlbpCols)\n            else\n                pgrid.reconfigure(null, pgrid.mlbhCols)\n"],[0,"        "]],"start1":2677,"start2":2677,"length1":16,"length2":260}]],"length":3186,"saved":false}
{"ts":1372513515257,"patch":[[{"diffs":[[0,"  'stats"],[-1,"etgrid"],[0,"': {\n   "]],"start1":1126,"start2":1126,"length1":22,"length2":16},{"diffs":[[0,"    "],[-1,"filterchange"],[1,"load"],[0,": th"]],"start1":1151,"start2":1151,"length1":20,"length2":12},{"diffs":[[0,"rillDown"],[-1,","],[1,"\n            },\n            'statsetgrid': {"],[0,"\n       "]],"start1":1167,"start2":1167,"length1":17,"length2":60}]],"length":3215,"saved":false}
{"ts":1372513633317,"patch":[[{"diffs":[[0,"    "],[-1,"this.control({\n            'stats': {\n                "],[1,"statsStore.on('"],[0,"load"],[-1,":"],[1,"',"],[0," thi"]],"start1":1097,"start2":1097,"length1":67,"length2":29},{"diffs":[[0,", this.drillDown"],[1,", this);"],[0,"\n            },\n"]],"start1":1121,"start2":1121,"length1":32,"length2":40},{"diffs":[[0," this);\n        "],[-1,"    },"],[1,"this.control({"],[0,"\n            'st"]],"start1":1138,"start2":1138,"length1":38,"length2":46}]],"length":3193,"saved":false}
{"contributors":[],"silentsave":false,"ts":1372522618596,"patch":[[{"diffs":[[0,"';\n\n"],[-1,"        statsStore.on('load', this.drillDown, this);\n"],[0,"    "]],"start1":1089,"start2":1089,"length1":61,"length2":8}]],"length":3140,"saved":false}
{"contributors":[],"silentsave":false,"ts":1373025822212,"patch":[[{"diffs":[[0,"le('"],[-1,"Game"],[1,"Player"],[0," Det"]],"start1":3046,"start2":3046,"length1":12,"length2":14}]],"length":3142,"saved":false}
{"ts":1373025989819,"patch":[[{"diffs":[[0," Details"],[-1,":"],[1," for"],[0," ' + sta"]],"start1":3056,"start2":3056,"length1":17,"length2":20}]],"length":3145,"saved":false}
{"ts":1373026077033,"patch":[[{"diffs":[[0,"et.data."],[1,"fname +\n            ' ' + statset.data.l"],[0,"name);\n "]],"start1":3078,"start2":3078,"length1":16,"length2":56}]],"length":3185,"saved":false}
{"ts":1373026106008,"patch":[[{"diffs":[[0,"e('P"],[-1,"layer Detail"],[1,"ast Game Statistic"],[0,"s fo"]],"start1":3047,"start2":3047,"length1":20,"length2":26}]],"length":3191,"saved":false}
{"contributors":[],"silentsave":false,"ts":1373975426035,"patch":[[{"diffs":[[0,"e: this."],[-1,"drillDown"],[1,"onPlayerChanged"],[0,"\n       "]],"start1":1175,"start2":1175,"length1":25,"length2":31}]],"length":3197,"saved":false}
{"ts":1373975459626,"patch":[[{"diffs":[[0,"    },\n\n"],[1,"    onPlayerChanged: function(grid, statsets) {\n        this.drillDown(grid, statsets);    \n    },\n    \n"],[0,"    /**\n"]],"start1":2069,"start2":2069,"length1":16,"length2":120}]],"length":3301,"saved":false}
{"ts":1373975520726,"patch":[[{"diffs":[[0,"tsets); "],[1,"\n"],[0,"   "],[1,"     this.showWeather(grid, statsets);"],[0,"\n    },\n"]],"start1":2157,"start2":2157,"length1":19,"length2":58}]],"length":3340,"saved":false}
{"ts":1373975535407,"patch":[[{"diffs":[[0,"show"],[-1,"Weather"],[1,"GameDetail"],[0,"(gri"]],"start1":2179,"start2":2179,"length1":15,"length2":18}]],"length":3343,"saved":false}
{"ts":1373975691263,"patch":[[{"diffs":[[0," }\n    }"],[1,",\n    \n    /**\n     * Load game data into the WeatherDisplay view\n     * @param {DFST.model.StatSet} statset The statset to load\n     */\n    showGameDetail: function(grid, statsets) {        \n        alert ('game detail');\n/*         var statset = statsets[0],\n            detailsInfoView = this.getDrilldowninfo(),\n            detailsView = this.getDrilldowndetails(),\n            store;\n                   \n        if (statset && detailsView) {\n            this.playerId = statset.data.id;\n            this.siteId = this.getStatsStore().filters.get(\"scoring\").value;\n            this.gameId = statset.data.gameId;\n\n            var pos = statset.data.spos;\n            var pgrid = this.getPlayerGrid();\n            if (pos == 'P')\n                pgrid.reconfigure(null, pgrid.mlbpCols)\n            else\n                pgrid.reconfigure(null, pgrid.mlbhCols)\n            this.loadStatSetData();\n            detailsInfoView.statset = statset;\n            detailsInfoView.update(statset.data);\n            detailsView.setTitle('Past Game Statistics for ' + statset.data.fname +\n            ' ' + statset.data.lname);\n            detailsView.show();\n        }\n    }    \n*/    \n    "],[0,"});\n\n"]],"start1":3330,"start2":3330,"length1":13,"length2":1193}]],"length":4523,"saved":false}
{"ts":1373975757551,"patch":[[{"diffs":[[0,"  }\n"],[1,"*/"],[0,"    "],[-1,"}"],[1,"\n"],[0,"    "],[-1,"\n*/"],[1,"}"],[0,"    "]],"start1":4493,"start2":4493,"length1":20,"length2":20}]],"length":4523,"saved":false}
{"ts":1373975909036,"patch":[[{"diffs":[[0,"erStats'"],[1,", 'Games'"],[0,"],\n\n    "]],"start1":100,"start2":100,"length1":16,"length2":25},{"diffs":[[0,"StatSet'"],[1,", 'Game'"],[0,"],\n\n    "]],"start1":152,"start2":152,"length1":16,"length2":24},{"diffs":[[0,"rGrid', "],[1,"\n    "],[0,"'drilldo"]],"start1":214,"start2":214,"length1":16,"length2":21},{"diffs":[[0,"ailInfo'"],[1,",\n    'weather.Display'"],[0,"],\n\n    "]],"start1":262,"start2":262,"length1":16,"length2":39},{"diffs":[[0,"extopp'}"],[1,",\n        { ref: 'weatherdisplay', selector: 'weatherdisplay' }"],[0,"\n       "]],"start1":572,"start2":572,"length1":16,"length2":79}]],"length":4631,"saved":false}
{"ts":1373976018904,"patch":[[{"diffs":[[0,"   \n"],[-1,"        alert ('game detail');\n/* "],[0,"    "]],"start1":3634,"start2":3634,"length1":42,"length2":8},{"diffs":[[0,"    "],[-1,"detailsInfoView = this.getDrilldowninfo(),\n            detailsView = this.getDrilldowndetails(),\n            store;\n                   \n        if (statset && detailsView) {\n            this.playerId = statset.data.id;\n            this.siteId = this.getStatsStore().filters.get(\"scoring\").value;\n            this.gameId = statset.data.gameId;\n\n            var pos = statset.data.spos;\n            var pgrid = this.getPlayerGrid();\n            if (pos == 'P')\n                pgrid.reconfigure(null, pgrid.mlbpCols)\n            else\n                pgrid.reconfigure(null, pgrid.mlbhCols)\n            this.loadStatSetData();\n            detailsInfoView.statset = statset;\n            detailsInfoView.update(statset.data);\n            detailsView.setTitle('Past Game Statistics for ' + statset.data.fname +\n            ' ' + statset.data.lname);\n            detailsView.show();\n        }\n*/    "],[1,"weatherDisplayView = this.getWeatherdisplay(),\n            gamesStore = this.getGamesStore;\n\n        weatherDisplayView.show();"],[0,"\n   "]],"start1":3681,"start2":3681,"length1":900,"length2":135}]],"length":3832,"saved":false}
{"ts":1373976178220,"patch":[[{"diffs":[[0,"mesStore"],[1,"()"],[0,";\n\n     "]],"start1":3767,"start2":3767,"length1":16,"length2":18}]],"length":3834,"saved":false}
{"ts":1373976600105,"patch":[[{"diffs":[[0,"            "],[-1,"weatherDisplay"],[1,"game"],[0,"View = this."]],"start1":3673,"start2":3673,"length1":38,"length2":28},{"diffs":[[0,"ore();\n\n"],[1,"        if (statset && gameView) {\n            var gameId = statset.data.gameId;\n            var game = gamesStore.find('gid', gameId);\n            if (game) {\n                var weather = game.getAssociatedData();\n        "],[0,"        "]],"start1":3762,"start2":3762,"length1":16,"length2":240},{"diffs":[[0,"iew.show();\n"],[1,"            }\n        }\n"],[0,"    }    \n  "]],"start1":4017,"start2":4017,"length1":24,"length2":48}]],"length":4072,"saved":false}
{"ts":1373976750625,"patch":[[{"diffs":[[0,"ore.find"],[1,"Record"],[0,"('gid', "]],"start1":3881,"start2":3881,"length1":16,"length2":22}]],"length":4078,"saved":false}
{"ts":1373976799713,"patch":[[{"diffs":[[0,"    "],[1,"alert("],[0,"weather"],[-1,"Display"],[1,"[0].summary);\n                game"],[0,"View"]],"start1":4004,"start2":4004,"length1":22,"length2":55}]],"length":4111,"saved":false}
{"ts":1373976882482,"patch":[[{"diffs":[[0,"    else"],[1," "],[0,"\n       "]],"start1":3078,"start2":3078,"length1":16,"length2":17}]],"length":4112,"saved":false}
{"ts":1374054812886,"patch":[[{"diffs":[[0,"ciatedData()"],[1,".weather"],[0,";\n          "]],"start1":3979,"start2":3979,"length1":24,"length2":32}]],"length":4120,"saved":false}
{"ts":1374055646646,"patch":[[{"diffs":[[0,"er;\n"],[-1,"                alert(weather[0].summary);\n"],[0,"    "]],"start1":3997,"start2":3997,"length1":51,"length2":8}]],"length":4077,"saved":false}
{"ts":1374055692852,"patch":[[{"diffs":[[0,"splay' }"],[1,",\n        { ref: 'hour1', selector: 'weatherdisplay' },\n        { ref: 'hour2', selector: 'weatherdisplay' },\n        { ref: 'hour3', selector: 'weatherdisplay' },\n        { ref: 'hour4', selector: 'weatherdisplay' },\n        { ref: 'hour5', selector: 'weatherdisplay' },"],[0,"\n       "]],"start1":635,"start2":635,"length1":16,"length2":287}]],"length":4348,"saved":false}
{"ts":1374055736256,"patch":[[{"diffs":[[0," selector: '"],[-1,"weatherdisplay"],[1,"hour#hour1"],[0,"' },\n       "]],"start1":668,"start2":668,"length1":38,"length2":34},{"diffs":[[0," selector: '"],[-1,"weatherdisplay"],[1,"hour#hour2"],[0,"' },\n       "]],"start1":718,"start2":718,"length1":38,"length2":34},{"diffs":[[0," selector: '"],[-1,"weatherdisplay"],[1,"hour#hour3"],[0,"' },\n       "]],"start1":768,"start2":768,"length1":38,"length2":34},{"diffs":[[0," selector: '"],[-1,"weatherdisplay"],[1,"hour#hour4"],[0,"' },\n       "]],"start1":818,"start2":818,"length1":38,"length2":34},{"diffs":[[0," selector: '"],[-1,"weatherdisplay"],[1,"hour#hour5"],[0,"' },\n       "]],"start1":868,"start2":868,"length1":38,"length2":34}]],"length":4328,"saved":false}
{"ts":1374056010022,"patch":[[{"diffs":[[0,"eather;\n"],[1,"                var wi = weather.length;\n                var hrs = gameView.items;\n                for (var i=0; i < wi; i++) {\n                    var hour = this.getHour1();\n                    var hourx = this.get\n                }\n"],[0,"        "]],"start1":4244,"start2":4244,"length1":16,"length2":251}]],"length":4563,"saved":false}
{"ts":1374056017574,"patch":[[{"diffs":[[0,"();\n"],[-1,"                    var hourx = this.get\n"],[0,"    "]],"start1":4424,"start2":4424,"length1":49,"length2":8}]],"length":4522,"saved":false}
{"ts":1374056274283,"patch":[[{"diffs":[[0,"getHour1();\n"],[1,"                    var x = Ext.ComponentQuery.query('hour#hour' + i);\n                    var y = x;\n"],[0,"            "]],"start1":4416,"start2":4416,"length1":24,"length2":126}]],"length":4624,"saved":false}
