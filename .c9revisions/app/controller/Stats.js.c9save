{"ts":1340374405662,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"Ext.define('DFST.controller.Stats', {\n    extend: 'Ext.app.Controller',\n\n    stores: ['Stats', 'PlayerStats'],\n\n    models: ['StatSet', 'PlayerStatSet'],\n\n    views: ['statset.Grid', 'statset.PlayerGrid', 'drilldown.Details', 'drilldown.DetailInfo'],\n\n    refs: [{\n    \tref: 'drilldowndetails',\n    \tselector: 'drilldowndetails'\n    }, {\n        ref: 'drilldowninfo',\n    \tselector: 'drilldowninfo'\n    }],\n\n    init: function() {\n        // Set up service URLs\n        var host = 'http://localhost:49533';    //local\n        if (location.hostname.indexOf('cloudapp.net') > 0) {\n            host = 'http://dfst.cloudapp.net';  //live azure\n        }\n//        host = 'http://localhost:81';       //local azure dev fabric \n        var statsStore = this.getStatsStore();\n        var playerStatsStore = this.getPlayerStatsStore();\n        statsStore.proxy.url = host + '/api/players/';\n        playerStatsStore.proxy.url = host + '/api/playerstats/';\n\n        this.control({\n            'statsetgrid': {\n                selectionchange: this.drillDown\n            },\n            'statsetgrid > tableview': {\n                itemdblclick: this.loadStatSet,\n                refresh: this.selectStatSet\n            }\n        });\n    },\n    \n    selectStatSet: function(view) {\n        var first = this.getStatsStore().getAt(0);\n        if (first) {\n            view.getSelectionModel().select(first);\n        }\n    },\n\n    /**\n     * Loads the given statset into the drilldown view\n     * @param {DFST.model.StatSet} statset The statset to load\n     */\n    drillDown: function(grid, statsets) {\n        var statset = statsets[0],\n            detailsInfoView = this.getDrilldowninfo(),\n            detailsView = this.getDrilldowndetails(),\n            siteId=this.getStatsStore().filters.get(\"scoring\").value,\n            store;\n\n        if (statset && detailsView) {\n            store = this.getPlayerStatsStore();\n            store.filter([\n                {id:'id', property: 'id', value: statset.data.id},\n                {id:'scoring', property: 'scoring', value: siteId}\n            ]);\n            detailsInfoView.statset = statset;\n            detailsInfoView.update(statset.data);\n            detailsView.setTitle('Game Details: ' + statset.data.name);\n            detailsView.show();\n        }\n    }});\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2307}]],"length":2307}
{"contributors":[],"silentsave":false,"ts":1359300940397,"patch":[[{"diffs":[[0,"      }\n"],[-1,"//"],[0,"        "]],"start1":642,"start2":642,"length1":18,"length2":16}]],"length":2305,"saved":false}
{"ts":1359301101252,"patch":[[{"diffs":[[0,"azure\n        }\n"],[1,"//"],[0,"        host = '"]],"start1":634,"start2":634,"length1":32,"length2":34}]],"length":2307,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359824054243,"patch":[[{"diffs":[[0,"    site"],[-1,"Id"],[1,"Abb"],[0,"=this.ge"]],"start1":1741,"start2":1741,"length1":18,"length2":19},{"diffs":[[0,"site"],[-1,"Id"],[1,"Abb"],[0,"}\n  "]],"start1":2063,"start2":2063,"length1":10,"length2":11}]],"length":2309,"saved":false}
{"contributors":[],"silentsave":false,"ts":1359830608016,"patch":[[{"diffs":[[0,"ue: site"],[-1,"Abb"],[1,"Id"],[0,"}\n      "]],"start1":2059,"start2":2059,"length1":19,"length2":18}]],"length":2308,"saved":false}
{"ts":1359830868474,"patch":[[{"diffs":[[0,"site"],[-1,"Abb"],[1,"Id"],[0,"=thi"]],"start1":1745,"start2":1745,"length1":11,"length2":10},{"diffs":[[0,"value: s"],[-1,"ite"],[1,"tat"],[0,"Id}\n    "]],"start1":2055,"start2":2055,"length1":19,"length2":19}]],"length":2307,"saved":false}
{"ts":1359830884158,"patch":[[{"diffs":[[0,"value: s"],[-1,"tat"],[1,"ite"],[0,"Id}\n    "]],"start1":2055,"start2":2055,"length1":19,"length2":19}]],"length":2307,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360515498751,"patch":[[{"diffs":[[0,"ndexOf('"],[-1,"cloudapp.net"],[1,"azurewebites"],[0,"') > 0) "]],"start1":549,"start2":549,"length1":28,"length2":28}]],"length":2307,"saved":false}
{"ts":1360515544015,"patch":[[{"diffs":[[0,"azureweb"],[1,"s"],[0,"ites') >"]],"start1":557,"start2":557,"length1":16,"length2":17}]],"length":2308,"saved":false}
{"ts":1360519378059,"patch":[[{"diffs":[[0,"p://dfst"],[1,"api"],[0,".cloudap"]],"start1":603,"start2":603,"length1":16,"length2":19}]],"length":2311,"saved":false}
{"contributors":[],"silentsave":false,"ts":1363180625263,"patch":[[{"diffs":[[0,"o'\n    }"],[-1,""],[0,""],[1,", {\n        ref: 'drilldownnextopp',\n        selector: 'drilldowndetails checkbox#nextopp'\n    }\n    "],[0,"],\n\n    "]],"start1":396,"start2":396,"length1":16,"length2":117},{"diffs":[[0,"           }"],[1,","],[0,"\n        });"]],"start1":1303,"start2":1303,"length1":24,"length2":25},{"diffs":[[0,"        "],[-1,"}"],[1,"    'drilldowninfo checkbox#nextopp':{\n                change: this.loadStatSetData\n            }\n            });\n    },\n    \n    loadStatSetData: function(limitToNextOpponent) {\n        var limit = \n        store = this.getPlayerStatsStore();\n        store.filter([\n            {id:'id', property: 'id', value: this.playerId},\n            {id:'scoring', property: 'scoring', value: this.siteId},\n            {id:'nextopp', property: 'nextopp', value: limitToNextOpponent ? this.gameId : limitToNextOpponent},\n        ]"],[0,");\n    }"]],"start1":1317,"start2":1317,"length1":17,"length2":535},{"diffs":[[0,"   s"],[-1,"iteId=this.getStatsStore().filters.get(\"scoring\").value,"],[1,"tore;"],[0,"\n   "]],"start1":2366,"start2":2366,"length1":64,"length2":13},{"diffs":[[0,"        "],[-1,"store;\n"],[0,"\n       "]],"start1":2380,"start2":2380,"length1":23,"length2":16},{"diffs":[[0,"    "],[-1,"if (statset && detailsView) {\n            store"],[1,"this.playerId = statset.data.id;\n        this.siteId"],[0," = t"]],"start1":2393,"start2":2393,"length1":55,"length2":60},{"diffs":[[0,"iteId = this.get"],[-1,"Player"],[0,"StatsStore();\n  "]],"start1":2444,"start2":2444,"length1":38,"length2":32},{"diffs":[[0,"re()"],[-1,";\n            store.filter([\n                {id:'id', property: 'id', value:"],[1,".filters.get(\"scoring\").value;\n        this.gameId ="],[0," sta"]],"start1":2468,"start2":2468,"length1":85,"length2":60},{"diffs":[[0,"ata."],[-1,"id},"],[1,"gameId;"],[0,"\n   "]],"start1":2534,"start2":2534,"length1":12,"length2":15},{"diffs":[[0,"    "],[1,"\n"],[0,"        "],[-1,"{id:'scoring', property: 'scoring', value: siteId}\n            ]"],[1,"if (statset && detailsView) {\n            this.loadStatSetData("],[0,");\n "]],"start1":2550,"start2":2550,"length1":80,"length2":80}]],"length":2850,"saved":false}
{"ts":1363180691336,"patch":[[{"diffs":[[0,"limit = "],[1,"this.getDrilldownnextopp().getValue();"],[0,"\n       "]],"start1":1516,"start2":1516,"length1":16,"length2":54}]],"length":2888,"saved":false}
{"ts":1363180703668,"patch":[[{"diffs":[[0,"unction("],[-1,"limitToNextOpponent"],[0,") {\n    "]],"start1":1473,"start2":1473,"length1":35,"length2":16},{"diffs":[[0,"e: limit"],[-1,"ToNextOpponent"],[0," ? this."]],"start1":1793,"start2":1793,"length1":30,"length2":16},{"diffs":[[0,"imit"],[-1,"ToNextOpponent"],[0,"},\n "]],"start1":1819,"start2":1819,"length1":22,"length2":8}]],"length":2841,"saved":false}
{"ts":1363180717317,"patch":[[{"diffs":[[0,"();\n        "],[1,"var "],[0,"store = this"]],"start1":1540,"start2":1540,"length1":24,"length2":28}]],"length":2845,"saved":false}
{"contributors":[],"silentsave":false,"ts":1363183391804,"patch":[[{"diffs":[[0,"re;\n            "],[1,"        "],[0,"\n"],[1,"        if (statset && detailsView) {\n    "],[0,"        this.pla"]],"start1":2367,"start2":2367,"length1":33,"length2":83},{"diffs":[[0,"id;\n        "],[1,"  "],[1,"  "],[0,"this.siteId "]],"start1":2471,"start2":2471,"length1":24,"length2":28},{"diffs":[[0,"ue;\n        "],[1,"    "],[0,"this.gameId "]],"start1":2548,"start2":2548,"length1":24,"length2":28},{"diffs":[[0,"Id;\n"],[-1,"        \n        if (statset && detailsView) {"],[0,"\n   "]],"start1":2595,"start2":2595,"length1":54,"length2":8}]],"length":2857,"saved":false}
{"contributors":[],"silentsave":false,"ts":1372513205832,"patch":[[{"diffs":[[0,"s: ["],[-1,"{\n    \t"],[1,"\n        { ref: 'playerGrid', selector: 'statsetplayergrid' },\n        { "],[0,"ref:"]],"start1":259,"start2":259,"length1":15,"length2":81},{"diffs":[[0,"etails',"],[-1,"\n    \t"],[1,"  "],[0,"selector"]],"start1":352,"start2":352,"length1":22,"length2":18},{"diffs":[[0,"details'"],[-1,"\n    }, {"],[1,"},"],[0,"\n       "],[1," {"],[0," ref: 'd"]],"start1":382,"start2":382,"length1":33,"length2":28},{"diffs":[[0,"fo',"],[-1,"\n    \t"],[1," "],[0,"sele"]],"start1":420,"start2":420,"length1":14,"length2":9},{"diffs":[[0,"nfo'"],[-1,"\n   "],[0," },"],[-1," {"],[0,"\n       "],[1," {"],[0," ref"]],"start1":446,"start2":446,"length1":25,"length2":21},{"diffs":[[0,"extopp',"],[-1,"\n       "],[0," selecto"]],"start1":480,"start2":480,"length1":24,"length2":16},{"diffs":[[0,"opp'"],[1,"}"],[0,"\n    "],[-1,"}\n"],[0,"    "]],"start1":530,"start2":530,"length1":15,"length2":14},{"diffs":[[0,"setgrid': {\n"],[1,"                filterchange: this.drillDown,\n"],[0,"            "]],"start1":1133,"start2":1133,"length1":24,"length2":70},{"diffs":[[0,"ameId;\n\n"],[1,"            var pos = statset.data.spos;\n            var pgrid = this.getPlayerGrid();\n            if (pos == 'P')\n                pgrid.reconfigure(null, pgrid.mlbpCols)\n            else\n                pgrid.reconfigure(null, pgrid.mlbhCols)\n"],[0,"        "]],"start1":2677,"start2":2677,"length1":16,"length2":260}]],"length":3186,"saved":false}
{"ts":1372513515257,"patch":[[{"diffs":[[0,"  'stats"],[-1,"etgrid"],[0,"': {\n   "]],"start1":1126,"start2":1126,"length1":22,"length2":16},{"diffs":[[0,"    "],[-1,"filterchange"],[1,"load"],[0,": th"]],"start1":1151,"start2":1151,"length1":20,"length2":12},{"diffs":[[0,"rillDown"],[-1,","],[1,"\n            },\n            'statsetgrid': {"],[0,"\n       "]],"start1":1167,"start2":1167,"length1":17,"length2":60}]],"length":3215,"saved":false}
{"ts":1372513633317,"patch":[[{"diffs":[[0,"    "],[-1,"this.control({\n            'stats': {\n                "],[1,"statsStore.on('"],[0,"load"],[-1,":"],[1,"',"],[0," thi"]],"start1":1097,"start2":1097,"length1":67,"length2":29},{"diffs":[[0,", this.drillDown"],[1,", this);"],[0,"\n            },\n"]],"start1":1121,"start2":1121,"length1":32,"length2":40},{"diffs":[[0," this);\n        "],[-1,"    },"],[1,"this.control({"],[0,"\n            'st"]],"start1":1138,"start2":1138,"length1":38,"length2":46}]],"length":3193,"saved":false}
{"contributors":[],"silentsave":false,"ts":1372522618596,"patch":[[{"diffs":[[0,"';\n\n"],[-1,"        statsStore.on('load', this.drillDown, this);\n"],[0,"    "]],"start1":1089,"start2":1089,"length1":61,"length2":8}]],"length":3140,"saved":false}
